<div class="app-shell" [class.collapsed]="isCollapsed">
  <!-- ========== TOPBAR ========== -->
  <p-toolbar class="topbar">
    <div class="p-toolbar-group-start">
      @if (!isSmall) {
      <p-button
        [icon]="toggleIcon"
        (onClick)="toggleSidebar()"
        [rounded]="true"
        [text]="true"
        [pTooltip]="isCollapsed ? 'Expandir' : 'Contraer'"
        tooltipPosition="bottom"
        aria-label="Toggle sidebar"
        [attr.aria-expanded]="!isCollapsed"
      />
      }
      <span class="brand">TimeLogic</span>
    </div>
    <!-- üîé B√∫squeda estilo mockup -->
    <div class="p-toolbar-group-center">
      <div class="searchbox">
        <i class="pi pi-search"></i>
        <!-- Usa [formControl]="searchCtrl" si filtras el men√∫; si no, deja [(ngModel)] o nada -->
        <input
          pInputText
          type="text"
          placeholder="Buscar empleados, √°reas, documentos..."
          [formControl]="searchCtrl"
          aria-label="Buscar en el men√∫"
        />
        <button
          type="button"
          class="clear-btn"
          pRipple
          *ngIf="searchCtrl?.value"
          (click)="clearSearch()"
          aria-label="Limpiar b√∫squeda"
        >
          <i class="pi pi-times"></i>
        </button>
      </div>
    </div>

    <div class="p-toolbar-group-end">
      <p-button icon="pi pi-bell" [text]="true" />
      <p-button icon="pi pi-sign-out" [text]="true" (onClick)="logout()" />
    </div>
  </p-toolbar>

  <!-- ========== BODY ========== -->
  <div class="content-area">
    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar" role="navigation" aria-label="Main">
      <!-- zona scroll (men√∫) -->
      <div class="sidebar-scroll">
        <p-menu [model]="items" styleClass="w-full sidebar-menu">
          <!-- encabezado de grupo -->
          <ng-template pTemplate="submenuheader" let-item>
            <span class="text-primary font-bold submenu-title">{{
              item.label
            }}</span>
          </ng-template>

          <!-- item -->
          <ng-template pTemplate="item" let-item>
            <a
              pRipple
              class="flex align-items-center p-menuitem-link"
              [ngClass]="{ 'icon-only': isCollapsed }"
              [routerLink]="item.routerLink"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: true }"
              pTooltip="{{ item.label }}"
              [tooltipDisabled]="!isCollapsed"
              tooltipPosition="right"
              [attr.aria-label]="item.label"
            >
              <span [class]="item.icon"></span>
              <span class="p-menuitem-text ml-2 label">{{ item.label }}</span>

              <p-badge
                *ngIf="item.badge"
                class="ml-auto badge"
                [value]="item.badge"
              />
            </a>
          </ng-template>
        </p-menu>
      </div>

      <!-- footer fijo abajo -->
      <div class="sidebar-footer">
        <button
          pRipple
          class="footer-btn p-link w-full flex align-items-center p-2 pl-3 text-color hover:surface-200 border-noround"
          pTooltip="Cuenta"
          [tooltipDisabled]="!isCollapsed"
          tooltipPosition="right"
          aria-label="Cuenta"
        >
          <p-avatar
            image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png"
            class="mr-2"
            shape="circle"
          />
          <span class="end-text inline-flex flex-column">
            <span class="font-bold">Mar√≠a G√≥mez</span>
            <span class="text-sm">Administradora</span>
          </span>
        </button>
      </div>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="main">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
